<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/dataTables.bootstrap5.min.css">
	<title></title>
</head>
<body>

<table id="example" class="table table-striped" style="width:50%">
	
        <thead>
            <tr>
                <th>Timestamp</th>
                <th>Meter Type</th>
                <th>Reading</th>
            </tr>
        </thead>
    	<tbody>
            {% for meter in output.keys(): %}
        		{% for timestamp, meter_reading in output[meter]: %}
                <tr>
                    <td>{{timestamp}}</td>
                    <td>{{meter}}</td>
                    <td>{{meter_reading}}</td>
                </tr>
                {% endfor %}
            {% endfor %}
        </tbody>
    </table>

    

	<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
	<script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"></script>
	<script>
    $(document).ready(function() {
    	$('#example').DataTable();
	});
	</script>

    <form action= {{url_for("download")}} method = "post">
    	<button class="btn btn-secondary" type="submit" name="output_file" value={{output_file}}>
    		<span class="glyphicon glyphicon-trash"></span> Download CSV
    	</button>
    </form>

</body>
</html>